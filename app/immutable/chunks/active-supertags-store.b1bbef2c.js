import{s as u}from"./active-tags-store.9b7ddb3d.js";import{S as p}from"./store-keys.b8cbd8ca.js";const i=()=>({posts:[],pageCount:0,ids:new Set,postCount:0,requested:!1}),c=t=>JSON.stringify({posts:t.posts,pageCount:t.pageCount,ids:[...t.ids.values()],postCount:t.postCount,requested:t.requested}),C=t=>{const e=JSON.parse(t);return{posts:e.posts,pageCount:e.pageCount,ids:new Set(e.ids),postCount:e.postCount,requested:e.requested}},g=()=>{const{subscribe:t,update:e,set:a}=u(p.Results,i(),c,C);return{subscribe:t,addPage(o,n=void 0){e(s=>{const r=o.filter(d=>!s.ids.has(d.id));return r.forEach(d=>s.ids.add(d.id)),{posts:[...s.posts,...r],pageCount:s.pageCount+1,ids:s.ids,postCount:n??s.postCount,requested:!0}})},reset(){a(i())}}},l=g(),m=()=>{const{subscribe:t,update:e,set:a}=u(p.ActiveSupertags,[]);return{subscribe:t,set:a,addOrReplace:o=>e(n=>{const s=n.findIndex(r=>r.name===o.name);return s===-1?n.push(o):n[s]=o,n}),removeByName:o=>e(n=>{const s=n.findIndex(r=>r.name===o);return n.splice(s,1),n}),reset:()=>a([])}},q=m();export{q as a,l as r};
